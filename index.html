
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Story Assessment V9 - Standalone</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/compromise/14.10.0/compromise.min.js"></script>
<style>
/* All your CSS exactly as given */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
body {
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0c29 100%);
    min-height: 100vh;
    color: #fff;
    overflow-x: hidden;
}
.stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
.star { position: absolute; width: 2px; height: 2px; background: rgba(255, 255, 255, 0.8); border-radius: 50%; animation: twinkle 3s infinite; }
@keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
}
.container {
    position: relative;
    z-index: 10;
    max-width: 414px;
    margin: 0 auto;
    min-height: 100vh;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.header {
    text-align: center;
    padding: 40px 20px 30px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    backdrop-filter: blur(30px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.header h1 {
    font-size: 2.2rem;
    font-weight: 300;
    margin-bottom: 8px;
    background: linear-gradient(135deg, #ffffff 0%, #a8edea 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.header .subtitle {
    font-size: 0.95rem;
    opacity: 0.7;
    font-weight: 300;
    letter-spacing: 0.5px;
}
.main-content {
    padding: 20px;
}
.question-section {
    display: none;
    animation: slideIn 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
.question-section.active {
    display: block;
}
@keyframes slideIn {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}
.quadrant-header {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 25px 20px;
    margin-bottom: 25px;
    text-align: center;
    backdrop-filter: blur(20px);
}
.quadrant-icon {
    font-size: 3.5rem;
    margin-bottom: 15px;
    display: block;
}
.quadrant-title {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 8px;
    background: linear-gradient(135deg, #ffffff 0%, #a8edea 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.quadrant-subtitle {
    font-size: 0.9rem;
    opacity: 0.7;
    font-weight: 300;
}
.question {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 20px;
    backdrop-filter: blur(20px);
}
.question h3 {
    font-size: 1.1rem;
    font-weight: 500;
    margin-bottom: 15px;
    line-height: 1.4;
    color: rgba(255, 255, 255, 0.9);
}
.question textarea {
    width: 100%;
    min-height: 100px;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    padding: 15px;
    font-size: 0.95rem;
    font-family: inherit;
    color: #fff;
    resize: vertical;
    transition: all 0.3s ease;
}
.question textarea::placeholder {
    color: rgba(255, 255, 255, 0.5);
}
.question textarea:focus {
    outline: none;
    border-color: rgba(168, 237, 234, 0.5);
    box-shadow: 0 0 20px rgba(168, 237, 234, 0.2);
    background: rgba(255, 255, 255, 0.12);
}
.progress-container {
    padding: 0 20px 20px;
}
.progress-bar {
    width: 100%;
    height: 3px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    overflow: hidden;
}
.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #a8edea, #fed6e3);
    border-radius: 2px;
    transition: width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
.nav-buttons {
    display: flex;
    justify-content: space-between;
    padding: 20px;
    gap: 15px;
}
.btn {
    flex: 1;
    padding: 16px;
    border: none;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(20px);
    letter-spacing: 0.3px;
}
.btn-primary {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    color: #1a1a2e;
    border: none;
}
.btn-primary:hover, .btn-primary:active {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(168, 237, 234, 0.3);
}
.btn-secondary {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.2);
}
.btn-secondary:hover, .btn-secondary:active {
    background: rgba(255, 255, 255, 0.15);
}
.intro-screen {
    padding: 20px;
    text-align: center;
}
.intro-screen.hidden {
    display: none;
}
.intro-title {
    font-size: 1.8rem;
    font-weight: 300;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #ffffff 0%, #a8edea 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.intro-text {
    font-size: 0.95rem;
    line-height: 1.6;
    opacity: 0.8;
    margin-bottom: 30px;
}
.quadrant-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin: 30px 0;
}
.mini-quadrant {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 20px;
    text-align: center;
    backdrop-filter: blur(20px);
}
.mini-quadrant-icon {
    font-size: 2.5rem;
    margin-bottom: 10px;
    display: block;
}
.mini-quadrant h4 {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 5px;
    color: rgba(255, 255, 255, 0.9);
}
.mini-quadrant p {
    font-size: 0.8rem;
    opacity: 0.6;
}
.results {
    display: none;
    padding: 20px;
}
.results.active {
    display: block;
    animation: slideIn 0.8s ease;
}
.results-header {
    text-align: center;
    margin-bottom: 30px;
    padding: 25px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    backdrop-filter: blur(20px);
}
.results-title {
    font-size: 1.6rem;
    font-weight: 300;
    margin-bottom: 10px;
    background: linear-gradient(135deg, #ffffff 0%, #a8edea 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.quadrant-result {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 20px;
    backdrop-filter: blur(20px);
}
.result-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}
.result-icon {
    font-size: 2rem;
    margin-right: 15px;
}
.result-info h4 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 5px;
    color: rgba(255, 255, 255, 0.9);
}
.result-score {
    font-size: 0.9rem;
    opacity: 0.7;
}
.strength-meter {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
    margin: 15px 0;
}
.strength-fill {
    height: 100%;
    background: linear-gradient(90deg, #a8edea, #fed6e3);
    border-radius: 3px;
    transition: width 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
.result-description {
    font-size: 0.95rem;
    line-height: 1.5;
    opacity: 0.8;
    margin-bottom: 15px;
}
.personalized-insights {
    background: rgba(168, 237, 234, 0.1);
    border: 1px solid rgba(168, 237, 234, 0.2);
    border-radius: 12px;
    padding: 20px;
    margin-top: 15px;
}
.insight-section {
    margin-bottom: 15px;
}
.insight-section:last-child {
    margin-bottom: 0;
}
.insight-section h5 {
    font-size: 0.95rem;
    font-weight: 600;
    margin-bottom: 8px;
    color: #a8edea;
    display: flex;
    align-items: center;
    gap: 8px;
}
.insight-section p {
    font-size: 0.9rem;
    line-height: 1.4;
    opacity: 0.9;
}
.email-capture {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 20px;
    margin: 20px 0;
    text-align: center;
    backdrop-filter: blur(20px);
}
.email-capture h3 {
    font-size: 1.1rem;
    margin-bottom: 15px;
    color: rgba(255, 255, 255, 0.9);
}
.email-capture input {
    padding: 12px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.08);
    color: #fff;
    font-size: 1rem;
    margin-right: 10px;
    width: 200px;
}
.email-capture input::placeholder {
    color: rgba(255, 255, 255, 0.5);
}
.email-capture input:focus {
    outline: none;
    border-color: rgba(168, 237, 234, 0.5);
    box-shadow: 0 0 10px rgba(168, 237, 234, 0.2);
}
.final-note {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 20px;
    margin-top: 20px;
    text-align: center;
    backdrop-filter: blur(20px);
}
.final-note h4 {
    font-size: 1.1rem;
    font-weight: 500;
    margin-bottom: 10px;
    color: rgba(255, 255, 255, 0.9);
}
.final-note p {
    font-size: 0.9rem;
    line-height: 1.5;
    opacity: 0.7;
    margin-bottom: 15px;
}
@media (max-width: 375px) {
    .header h1 {
        font-size: 1.9rem;
    }
    .quadrant-icon {
        font-size: 3rem;
    }
    .mini-quadrant-icon {
        font-size: 2rem;
    }
}
</style>
</head>
<body>

<div class="stars" id="stars"></div>
<div class="container">
    <div class="header">
        <h1>‚ú¶ Story Assessment ‚ú¶</h1>
        <div class="subtitle">Discover your behavioral narrative patterns</div>
    </div>

    <!-- Introduction Screen -->
    <div class="intro-screen" id="intro">
        <div class="main-content">
            <h2 class="intro-title">Welcome to Your Story Assessment</h2>
            <p class="intro-text">
                Explore the four fundamental survival stories that drive human behavior. 
                Discover how you navigate belonging, strategy, innovation, and boundary exploration.
            </p>
            <div class="quadrant-grid">
                <div class="mini-quadrant">
                    <div class="mini-quadrant-icon">üõ°Ô∏è</div>
                    <h4>NORTH: BELONGING</h4>
                    <p>Institution vs Outsider</p>
                </div>
                <div class="mini-quadrant">
                    <div class="mini-quadrant-icon">‚ôü</div>
                    <h4>EAST: STRATEGY</h4>
                    <p>Internal Politics</p>
                </div>
                <div class="mini-quadrant">
                    <div class="mini-quadrant-icon">üî•</div>
                    <h4>SOUTH: INNOVATION</h4>
                    <p>Individual vs Institution</p>
                </div>
                <div class="mini-quadrant">
                    <div class="mini-quadrant-icon">üåå</div>
                    <h4>WEST: BOUNDARY</h4>
                    <p>Individual vs Cosmos</p>
                </div>
            </div>
            <p class="intro-text">
                Take your time with each question. The more honest and detailed your responses, 
                the more accurate your results will be.
            </p>
        </div>
        <div class="nav-buttons">
            <button class="btn btn-primary" onclick="startAssessment()">Begin Your Journey</button>
        </div>
    </div>
    
    <!-- Progress Bar -->
    <div class="progress-container" id="progressContainer" style="display:none;">
        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width:0%;"></div>
        </div>
    </div>

    <!-- Assessment Sections -->
    <div class="main-content" id="assessment" style="display:none;">
        <!-- North Quadrant -->
        <div class="question-section active" data-quadrant="north">
            <div class="quadrant-header">
                <div class="quadrant-icon">üõ°Ô∏è</div>
                <div class="quadrant-title">North Quadrant: The Belonging Story</div>
                <div class="quadrant-subtitle">Institution vs Outsider</div>
            </div>
            <div class="question">
                <h3>How important is it for you to feel accepted and appreciated by your group or community?</h3>
                <textarea id="north1" placeholder="Think about times when you felt included vs excluded..."></textarea>
            </div>
            <div class="question">
                <h3>Describe a situation where you went out of your way to get attention or recognition.</h3>
                <textarea id="north2" placeholder="What drove you to seek that attention? What would have happened if no one noticed you?"></textarea>
            </div>
            <div class="question">
                <h3>What does 'belonging' mean to you, and how do you know when you truly belong somewhere?</h3>
                <textarea id="north3" placeholder="Think about the signs that tell you you're 'in' vs 'out' of a group..."></textarea>
            </div>
        </div>

        <!-- East Quadrant -->
        <div class="question-section" data-quadrant="east">
            <div class="quadrant-header">
                <div class="quadrant-icon">‚ôü</div>
                <div class="quadrant-title">East Quadrant: The Strategy Story</div>
                <div class="quadrant-subtitle">Internal Politics</div>
            </div>
            <div class="question">
                <h3>How do you handle situations where you sense hidden motives or social politics?</h3>
                <textarea id="east1" placeholder="Describe your strategies for navigating complex social situations..."></textarea>
            </div>
            <div class="question">
                <h3>Tell me about a time when you avoided a social situation because it felt too risky or complicated.</h3>
                <textarea id="east2" placeholder="What made it feel dangerous? What were you protecting yourself from?"></textarea>
            </div>
            <div class="question">
                <h3>How do you protect yourself when you're in environments where you can't fully trust everyone?</h3>
                <textarea id="east3" placeholder="Think about your strategies for staying safe in complex social dynamics..."></textarea>
            </div>
        </div>

        <!-- South Quadrant -->
        <div class="question-section" data-quadrant="south">
            <div class="quadrant-header">
                <div class="quadrant-icon">üî•</div>
                <div class="quadrant-title">South Quadrant: The Innovation Story</div>
                <div class="quadrant-subtitle">Individual vs Institution</div>
            </div>
            <div class="question">
                <h3>When do you feel most motivated to challenge rules, authority, or established ways of doing things?</h3>
                <textarea id="south1" placeholder="Think about times when you've pushed back against systems that didn't serve you..."></textarea>
            </div>
            <div class="question">
                <h3>Describe something you've worked hard to achieve or acquire, despite obstacles.</h3>
                <textarea id="south2" placeholder="What drove you to pursue this goal? How did you overcome resistance?"></textarea>
            </div>
            <div class="question">
                <h3>How important is it for you to make your own mark on the world or leave things better than you found them?</h3>
                <textarea id="south3" placeholder="What does 'success' or 'achievement' mean to you personally?"></textarea>
            </div>
        </div>

        <!-- West Quadrant -->
        <div class="question-section" data-quadrant="west">
            <div class="quadrant-header">
                <div class="quadrant-icon">üåå</div>
                <div class="quadrant-title">West Quadrant: The Boundary Story</div>
                <div class="quadrant-subtitle">Individual vs Cosmos</div>
            </div>
            <div class="question">
                <h3>How do you handle overwhelming sensations, emotions, or situations?</h3>
                <textarea id="west1" placeholder="Describe your go-to strategies when life feels like 'too much'..."></textarea>
            </div>
            <div class="question">
                <h3>What draws you to explore new, intense, or boundary-pushing experiences?</h3>
                <textarea id="west2" placeholder="Think about times you've tested limits - physical, emotional, spiritual..."></textarea>
            </div>
            <div class="question">
                <h3>How do you make sense of life's bigger mysteries, uncertainties, or existential questions?</h3>
                <textarea id="west3" placeholder="What's your relationship with the unknown, the spiritual, or philosophical aspects of existence?"></textarea>
            </div>
        </div>
    </div>

    <div class="nav-buttons" id="navButtons" style="display:none;">
        <button class="btn btn-secondary" id="prevBtn" onclick="previousSection()" style="display:none;">Previous</button>
        <button class="btn btn-primary" id="nextBtn" onclick="nextSection()">Next</button>
    </div>

    <!-- Results Section -->
    <div class="results" id="results">
        <div class="results-header">
            <h2 class="results-title">‚ú¶ Your Story Profile ‚ú¶</h2>
            <p>Your behavioral narrative patterns revealed</p>
        </div>
        <div id="resultsContent"></div>

        <!-- Email Capture -->
        <div class="email-capture">
            <h3>Get Your Assessment Results & Updates</h3>
            <div id="emailForm" style="display:inline-block;">
                <input 
                    type="email" 
                    id="userEmail" 
                    placeholder="Enter your email" 
                    required
                    oninput="validateEmailInput()"
                >
                <button type="button" class="btn btn-primary" onclick="submitEmail()" style="margin-left:10px; padding:10px 18px;">Notify Me</button>
            </div>
            <p id="emailMsg" style="margin-top:10px; color: #a8edea;"></p>
        </div>

        <div class="final-note">
            <h4>Your Journey Continues</h4>
            <p>These insights are a starting point for deeper self-understanding. Consider reflecting on these patterns in your daily life and relationships.</p>
            <button class="btn btn-secondary" onclick="restartAssessment()" style="margin-top: 15px;">Take Assessment Again</button>
        </div>
    </div>
</div>

<script>
    // STAR BACKGROUND
    function createStars() {
        const starsContainer = document.getElementById('stars');
        const numStars = 50;
        for (let i = 0; i < numStars; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }
    }
    createStars();

    // SIMPLE UTILS
    function validateEmailInput() {
        const emailInput = document.getElementById('userEmail');
        const emailMsg = document.getElementById('emailMsg');
        const email = emailInput.value.trim();
        const valid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        emailMsg.textContent = valid ? '' : 'Please enter a valid email address.';
        return valid;
    }

    function submitEmail() {
        if (!validateEmailInput()) return;
        const emailInput = document.getElementById('userEmail');
        const emailMsg = document.getElementById('emailMsg');
        emailMsg.textContent = 'Thanks! You will be notified.';
        emailInput.value = '';
    }

    // MAIN ASSESSMENT LOGIC
    let currentSection = 0;
    const sections = ['north', 'east', 'south', 'west'];
    const responses = {};

    function saveCurrentResponses() {
        const quadrant = sections[currentSection];
        const textareas = document.querySelectorAll(`[data-quadrant="${quadrant}"] textarea`);
        responses[quadrant] = Array.from(textareas).map(t => t.value.trim());
    }

    function updateProgress() {
        const progress = ((currentSection + 1) / sections.length) * 100;
        document.getElementById('progress').style.width = progress + '%';
    }

    function updateNavigation() {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        prevBtn.style.display = currentSection === 0 ? 'none' : 'inline-block';
        nextBtn.textContent = currentSection === sections.length - 1 ? 'Finish' : 'Next';
    }

    function startAssessment() {
        document.getElementById('intro').classList.add('hidden');
        document.getElementById('assessment').style.display = 'block';
        document.getElementById('navButtons').style.display = 'flex';
        document.getElementById('progressContainer').style.display = 'block';
        updateProgress();
        updateNavigation();
    }
    
    function nextSection() {
        saveCurrentResponses();
        if (currentSection < sections.length - 1) {
            document.querySelector(`[data-quadrant="${sections[currentSection]}"]`).classList.remove('active');
            currentSection++;
            document.querySelector(`[data-quadrant="${sections[currentSection]}"]`).classList.add('active');
            updateProgress();
            updateNavigation();
        } else {
            showResults();
        }
    }

    function previousSection() {
        if (currentSection > 0) {
            document.querySelector(`[data-quadrant="${sections[currentSection]}"]`).classList.remove('active');
            currentSection--;
            document.querySelector(`[data-quadrant="${sections[currentSection]}"]`).classList.add('active');
            updateProgress();
            updateNavigation();
        }
    }

    // ANALYSIS AND INSIGHTS

    // Simplified analysis example for demo, extend as needed
    function analyzeText(texts) {
        const combined = texts.join(' ').toLowerCase();
        return {
            belonging: (combined.match(/\b(belong|accept|include|community|group|team|family|friend|together|connect|fit|welcome)\b/g) || []).length,
            strategy: (combined.match(/\b(careful|safe|protect|avoid|risk|danger|trust|politics|navigate|strategy|plan|cautious)\b/g) || []).length,
            innovation: (combined.match(/\b(change|challenge|create|build|achieve|goal|success|push|break|rebel|innovate|different)\b/g) || []).length,
            boundary: (combined.match(/\b(explore|limit|edge|beyond|unknown|mystery|spiritual|intense|overwhelming|cosmic|transcend)\b/g) || []).length,
        };
    }

    function determineArchetype(quadrant, analysis) {
        if (quadrant === 'north') {
            if (analysis.belonging > 3) return "The Connector";
            if (analysis.belonging < 2) return "The Independent";
            return "The Seeker";
        } else if (quadrant === 'east') {
            if (analysis.strategy > 2) return "The Navigator";
            if (analysis.strategy < 2) return "The Direct";
            return "The Withdrawn";
        } else if (quadrant === 'south') {
            if (analysis.innovation > 3) return "The Changemaker";
            if (analysis.innovation < 2) return "The Collaborator";
            return "The Restless";
        } else if (quadrant === 'west') {
            if (analysis.boundary > 3) return "The Explorer";
            if (analysis.boundary < 2) return "The Grounded";
            return "The Sensitive";
        }
        return "Undefined";
    }

    // Archetype data for each quadrant
    const archetypeData = {
        north: {
            examples: "Think of figures like Martin Luther King Jr. or Malala Yousafzai, whose strength came from building belonging and inspiring communities.",
            story: "A young leader once struggled with feeling excluded until they grew into a role of weaving community ties that healed divisions.",
            practices: [
                "Host small gatherings that honor authentic voices",
                "Read ‚ÄúThe Art of Gathering‚Äù by Priya Parker"
            ]
        },
        east: {
            examples: "Similar to Sun Tzu or Machiavelli, you thrive in navigating strategy and unseen dynamics.",
            story: "A tactician avoided conflict until they finally leaned into strategy and turned hidden risks into alliances that served the whole group.",
            practices: [
                "Practice journaling social interactions and mapping dynamics",
                "Read ‚ÄúThe Prince‚Äù by Machiavelli for political awareness"
            ]
        },
        south: {
            examples: "Like Steve Jobs or Rosa Parks, you challenge norms and push innovation even against resistance.",
            story: "An inventor was rejected repeatedly, but refined their creation until it transformed entire industries.",
            practices: [
                "Take one bold but focused creative risk each week",
                "Read ‚ÄúCreative Confidence‚Äù by Tom Kelley"
            ]
        },
        west: {
            examples: "Figures like Carl Jung or Joan of Arc embody the exploration of mystery, edge, and transcendence.",
            story: "A seeker faced overwhelming visions, learned grounding rituals, and then offered wisdom that guided their people through uncertainty.",
            practices: [
                "Ground intense experiences with daily reflection or meditation",
                "Explore ‚ÄúMan and His Symbols‚Äù by Carl Jung"
            ]
        }
    };

    // Render archetype subsection for a quadrant
    function addArchetypeSubsection(container, quadrant) {
        const data = archetypeData[quadrant];
        const div = document.createElement('div');
        div.className = 'archetype-extras';
        div.innerHTML = `
            <div class="insight-section">
                <h5>‚ú® Archetype in Action</h5>
                <p>${data.examples}</p>
            </div>
            <div class="insight-section">
                <h5>üìñ A Story Like Yours</h5>
                <p>${data.story}</p>
            </div>
            <div class="insight-section">
                <h5>üß≠ Practices & Readings</h5>
                <ul>
                    ${data.practices.map(item => `<li>${item}</li>`).join('')}
                </ul>
            </div>
            <div class="insight-section">
                <h5>‚ùì Ask the Archetype</h5>
                <textarea placeholder="Ask how this archetype might respond to your challenge..." class="archetypeQuestion"></textarea>
                <button class="btn btn-secondary archetypeAskBtn">Ask</button>
                <div class="archetypeAnswer" style="margin-top:10px; color:#a8edea;"></div>
            </div>
        `;
        container.appendChild(div);

        const askBtn = div.querySelector('.archetypeAskBtn');
        const questionBox = div.querySelector('.archetypeQuestion');
        const answerBox = div.querySelector('.archetypeAnswer');

        askBtn.addEventListener('click', () => {
            const question = questionBox.value.trim();
            if (!question) {
                answerBox.textContent = "Please type a question for the archetype.";
                return;
            }
            const response = `If I were in your place, regarding "${question}", I would embrace my core values and act with the courage, wisdom, and patience that befit the ${quadrant} archetype.`;
            answerBox.textContent = response;
        });
    }

    function showResults() {
        saveCurrentResponses();

        document.getElementById('assessment').style.display = 'none';
        document.getElementById('navButtons').style.display = 'none';
        document.getElementById('progressContainer').style.display = 'none';
        document.getElementById('results').classList.add('active');

        const container = document.getElementById('resultsContent');
        container.innerHTML = '';

        sections.forEach(q => {
            const texts = responses[q] || [];
            const analysis = analyzeText(texts);
            const archetype = determineArchetype(q, analysis);
            const quadrantDiv = document.createElement('div');
            quadrantDiv.className = 'quadrant-result';

            quadrantDiv.innerHTML = `
                <div class="result-header">
                    <h3>${q.charAt(0).toUpperCase() + q.slice(1)} Quadrant - ${archetype}</h3>
                </div>
                <p>This archetype reflects the themes and patterns in your responses for this quadrant.</p>
            `;

            container.appendChild(quadrantDiv);

            addArchetypeSubsection(quadrantDiv, q);
        });
    }

    // Restart flow
    function restartAssessment() {
        document.getElementById('results').classList.remove('active');
        document.getElementById('intro').classList.remove('hidden');
        document.getElementById('assessment').style.display = 'none';
        document.getElementById('navButtons').style.display = 'none';
        document.getElementById('progressContainer').style.display = 'none';

        currentSection = 0;
        responses = {};
        document.querySelectorAll('textarea').forEach(t => t.value = '');
    }
</script>

</body>
</html>
