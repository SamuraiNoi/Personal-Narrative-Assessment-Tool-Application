<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gamified Life Preparedness Assessment</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
color: #333;
}

.container {
max-width: 900px;
margin: 0 auto;
padding: 20px;
}

header {
background: white;
padding: 30px;
border-radius: 12px;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
margin-bottom: 20px;
text-align: center;
}

header h1 {
font-size: 2rem;
color: #667eea;
margin-bottom: 10px;
}

header p {
color: #666;
line-height: 1.6;
}

.safety-warning {
background: #fff3cd;
border: 2px solid #ffc107;
border-radius: 8px;
padding: 20px;
margin-bottom: 20px;
}

.safety-warning h3 {
color: #856404;
margin-bottom: 10px;
display: flex;
align-items: center;
gap: 8px;
}

.safety-warning ul {
margin-left: 20px;
color: #856404;
}

.safety-warning li {
margin-bottom: 5px;
}

.section {
background: white;
padding: 30px;
border-radius: 12px;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
margin-bottom: 20px;
display: none;
}

.section.active {
display: block;
}

.section h2 {
color: #667eea;
margin-bottom: 20px;
font-size: 1.5rem;
}

.quadrant-intro {
background: #f8f9fa;
padding: 20px;
border-radius: 8px;
margin-bottom: 20px;
}

.question-block {
margin-bottom: 25px;
padding: 20px;
background: #f8f9fa;
border-radius: 8px;
}

.question-block h3 {
font-size: 1.1rem;
margin-bottom: 15px;
color: #333;
}

.question-block textarea {
width: 100%;
min-height: 120px;
padding: 12px;
border: 2px solid #e0e0e0;
border-radius: 6px;
font-family: inherit;
font-size: 0.95rem;
resize: vertical;
}

.question-block textarea:focus {
outline: none;
border-color: #667eea;
}

.skill-category {
margin-bottom: 25px;
padding: 20px;
background: #f8f9fa;
border-radius: 8px;
}

.skill-category h3 {
font-size: 1.1rem;
margin-bottom: 15px;
color: #667eea;
}

.skill-item {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 12px;
padding: 10px;
background: white;
border-radius: 6px;
}

.skill-item label {
flex: 1;
font-weight: 500;
}

.skill-item select {
padding: 6px 12px;
border: 2px solid #e0e0e0;
border-radius: 4px;
font-size: 0.9rem;
}

.occupation-input {
margin-bottom: 20px;
}

.occupation-input label {
display: block;
font-weight: 600;
margin-bottom: 8px;
}

.occupation-input input, .occupation-input select {
width: 100%;
padding: 12px;
border: 2px solid #e0e0e0;
border-radius: 6px;
font-size: 1rem;
}

.occupation-input textarea {
width: 100%;
min-height: 100px;
padding: 12px;
border: 2px solid #e0e0e0;
border-radius: 6px;
font-family: inherit;
resize: vertical;
}

.nav-buttons {
display: flex;
gap: 15px;
justify-content: space-between;
margin-top: 30px;
}

.btn {
padding: 12px 30px;
border: none;
border-radius: 6px;
font-size: 1rem;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
}

.btn-primary {
background: #667eea;
color: white;
}

.btn-primary:hover {
background: #5568d3;
transform: translateY(-2px);
}

.btn-secondary {
background: #e0e0e0;
color: #333;
}

.btn-secondary:hover {
background: #d0d0d0;
}

.progress-bar {
height: 4px;
background: #e0e0e0;
border-radius: 2px;
margin-bottom: 20px;
overflow: hidden;
}

.progress-fill {
height: 100%;
background: linear-gradient(90deg, #667eea, #764ba2);
transition: width 0.3s;
}

.results-section {
display: none;
}

.results-section.active {
display: block;
}

.score-card {
background: white;
padding: 25px;
border-radius: 12px;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
margin-bottom: 20px;
}

.score-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 15px;
}

.score-value {
font-size: 2rem;
font-weight: bold;
}

.score-value.high { color: #28a745; }
.score-value.medium { color: #ffc107; }
.score-value.low { color: #dc3545; }

.score-bar {
height: 8px;
background: #e0e0e0;
border-radius: 4px;
overflow: hidden;
margin-bottom: 15px;
}

.score-bar-fill {
height: 100%;
transition: width 1s;
}

.score-bar-fill.high { background: #28a745; }
.score-bar-fill.medium { background: #ffc107; }
.score-bar-fill.low { background: #dc3545; }

.gap-analysis {
background: #fff3cd;
border-left: 4px solid #ffc107;
padding: 20px;
border-radius: 8px;
margin: 20px 0;
}

.roadmap {
background: #d1ecf1;
border-left: 4px solid #17a2b8;
padding: 20px;
border-radius: 8px;
margin: 20px 0;
}

.roadmap h3 {
color: #0c5460;
margin-bottom: 15px;
}

.roadmap-phase {
background: white;
padding: 15px;
border-radius: 6px;
margin-bottom: 15px;
}

.roadmap-phase h4 {
color: #667eea;
margin-bottom: 10px;
}

.roadmap-phase ul {
margin-left: 20px;
}

.roadmap-phase li {
margin-bottom: 8px;
line-height: 1.5;
}

.warning-box {
background: #f8d7da;
border: 2px solid #dc3545;
border-radius: 8px;
padding: 15px;
margin: 15px 0;
}

.info-box {
background: #d4edda;
border: 2px solid #28a745;
border-radius: 8px;
padding: 15px;
margin: 15px 0;
}

.opportunities-section {
background: white;
padding: 25px;
border-radius: 12px;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
margin-bottom: 20px;
}

.opportunity-item {
border: 1px solid #ddd;
border-radius: 6px;
padding: 15px;
margin-bottom: 15px;
cursor: pointer;
transition: background-color 0.2s;
}
.opportunity-item:hover {
background-color: #f0f4ff;
}
.opportunity-title {
font-weight: 600;
color: #667eea;
}
.opportunity-source {
font-size: 0.85rem;
color: #666;
}

@keyframes slideIn {
from {
transform: translateX(400px);
opacity: 0;
}
to {
transform: translateX(0);
opacity: 1;
}
}
</style>
</head>
<body>
<div class="container">
    <header>
        <h1>Life Preparedness Assessment</h1>
        <p>A comprehensive evaluation of your psychological readiness and practical skills with personalized development roadmap</p>
    </header>

<div class="safety-warning">
    <h3>‚ö†Ô∏è Important Safety Disclaimer</h3>
    <ul>
        <li><strong>This is NOT a substitute for professional training.</strong> Do not attempt dangerous skills without proper instruction and supervision.</li>
        <li><strong>Self-assessment has limitations.</strong> Actual competency requires demonstration and validation, not just text responses.</li>
        <li><strong>Do not overestimate your abilities.</strong> Confidence without competence can be life-threatening in survival situations.</li>
        <li><strong>Seek professional help for mental health concerns.</strong> If you're experiencing crisis, contact a mental health professional immediately.</li>
        <li><strong>Practice in safe environments first.</strong> Never test survival skills in actual emergency situations without proper preparation.</li>
        <li><strong>This assessment is for personal development only.</strong> Results should not be used for employment, medical, or legal purposes.</li>
    </ul>
</div>

<div id="gamificationBar" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <span><strong>P-Level 1</strong></span>
        <span>0 / 100 XP</span>
        <span>üí∞ 0 Scrip</span>
    </div>
    <div style="height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
        <div style="height: 100%; width: 0%; background: linear-gradient(90deg, #28a745, #20c997); transition: width 0.3s;"></div>
    </div>
</div>

<div class="progress-bar">
    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
</div>

<div class="section active" id="introSection">
    <h2>Welcome to Your Development Journey</h2>
    <p style="margin-bottom: 20px; line-height: 1.6;">This assessment combines two critical dimensions of preparedness:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
        <div style="background: #f0f4ff; padding: 20px; border-radius: 8px;">
            <h3 style="color: #667eea; margin-bottom: 10px;">Psychological Assessment</h3>
            <p style="font-size: 0.9rem;">Evaluate your behavioral patterns, mindset, and emotional readiness across four survival quadrants.</p>
        </div>
        <div style="background: #fff5f0; padding: 20px; border-radius: 8px;">
            <h3 style="color: #ff6b6b; margin-bottom: 10px;">Practical Skills</h3>
            <p style="font-size: 0.9rem;">Assess your actual capabilities in survival, trades, and life-essential skills.</p>
        </div>
    </div>

    <div class="info-box">
        <h4>What You'll Receive:</h4>
        <ul style="margin-left: 20px; margin-top: 10px;">
            <li>Detailed psychological profile across 4 behavioral quadrants</li>
            <li>Practical skills inventory with honest capability assessment</li>
            <li>Gap analysis identifying mismatches between mindset and skills</li>
            <li>Personalized 30/60/90 day development roadmap</li>
            <li>XP, badges, and gamified progress tracking</li>
            <li>Targeted job and education opportunities</li>
        </ul>
    </div>

    <p style="margin-top: 20px; color: #666; font-size: 0.9rem;"><strong>Time Required:</strong> 30-45 minutes for honest, thoughtful responses</p>

    <div class="nav-buttons">
        <div></div>
        <button class="btn btn-primary" onclick="startAssessment()">Begin Assessment</button>
    </div>
</div>

<div class="section" id="psychNorth">
    <div class="quadrant-intro">
        <h2>üõ°Ô∏è North Quadrant: Belonging</h2>
        <p><strong>Theme:</strong> Institution vs Outsider</p>
        <p style="margin-top: 10px;">This quadrant explores your relationship with groups, communities, and social acceptance.</p>
    </div>

    <div class="question-block">
        <h3>How important is it for you to feel accepted and appreciated by your group or community?</h3>
        <textarea id="north1" placeholder="Reflect on times when you felt included versus excluded. How did these experiences affect you?"></textarea>
    </div>

    <div class="question-block">
        <h3>Describe a situation where you went out of your way to get attention or recognition.</h3>
        <textarea id="north2" placeholder="What drove you to seek that attention? What would have happened if no one noticed you?"></textarea>
    </div>

    <div class="question-block">
        <h3>What does 'belonging' mean to you, and how do you know when you truly belong somewhere?</h3>
        <textarea id="north3" placeholder="Think about the signs that tell you you're 'in' versus 'out' of a group."></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="psychEast">
    <div class="quadrant-intro">
        <h2>‚ôüÔ∏è East Quadrant: Strategy</h2>
        <p><strong>Theme:</strong> Internal Politics</p>
        <p style="margin-top: 10px;">This quadrant examines how you navigate complex social dynamics and protect yourself.</p>
    </div>

    <div class="question-block">
        <h3>How do you handle situations where you sense hidden motives or social politics?</h3>
        <textarea id="east1" placeholder="Describe your strategies for navigating complex social situations."></textarea>
    </div>

    <div class="question-block">
        <h3>Tell me about a time when you avoided a social situation because it felt too risky or complicated.</h3>
        <textarea id="east2" placeholder="What made it feel dangerous? What were you protecting yourself from?"></textarea>
    </div>

    <div class="question-block">
        <h3>How do you protect yourself when you're in environments where you can't fully trust everyone?</h3>
        <textarea id="east3" placeholder="Think about your strategies for staying safe."></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="psychSouth">
    <div class="quadrant-intro">
        <h2>üî• South Quadrant: Innovation</h2>
        <p><strong>Theme:</strong> Individual vs Institution</p>
        <p style="margin-top: 10px;">This quadrant explores your drive to challenge systems and create change.</p>
    </div>

    <div class="question-block">
        <h3>When do you feel most motivated to challenge rules, authority, or established ways of doing things?</h3>
        <textarea id="south1" placeholder="Think about times when you've pushed back against the status quo."></textarea>
    </div>

    <div class="question-block">
        <h3>Describe something you've worked hard to achieve or acquire, despite obstacles.</h3>
        <textarea id="south2" placeholder="What drove you to pursue this goal? What did success mean to you?"></textarea>
    </div>

    <div class="question-block">
        <h3>How important is it for you to make your own mark on the world?</h3>
        <textarea id="south3" placeholder="What does personal 'success' mean to you?"></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="psychWest">
    <div class="quadrant-intro">
        <h2>üåå West Quadrant: Boundary</h2>
        <p><strong>Theme:</strong> Individual vs Cosmos</p>
        <p style="margin-top: 10px;">This quadrant examines your relationship with limits, intensity, and the unknown.</p>
    </div>

    <div class="question-block">
        <h3>How do you handle overwhelming sensations, emotions, or situations?</h3>
        <textarea id="west1" placeholder="Describe your go-to strategies for coping with intensity."></textarea>
    </div>

    <div class="question-block">
        <h3>What draws you to explore new, intense, or boundary-pushing experiences?</h3>
        <textarea id="west2" placeholder="Think about times you've tested your limits."></textarea>
    </div>

    <div class="question-block">
        <h3>How do you make sense of life's bigger mysteries or uncertainties?</h3>
        <textarea id="west3" placeholder="Describe your relationship with the unknown."></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="skillsIntro">
    <h2>Practical Skills Assessment</h2>
    
    <div class="warning-box">
        <h4>‚ö†Ô∏è Honesty Check</h4>
        <p>Be brutally honest with yourself. Overestimating your skills can be dangerous. Rate based on what you can actually DO, not what you've read about or watched videos on.</p>
        <ul style="margin-left: 20px; margin-top: 10px;">
            <li><strong>None:</strong> No experience or knowledge</li>
            <li><strong>Beginner:</strong> Basic theoretical knowledge, minimal practice</li>
            <li><strong>Intermediate:</strong> Hands-on experience, can do with some difficulty</li>
            <li><strong>Advanced:</strong> Confident competency, can teach others</li>
        </ul>
    </div>

    <div class="occupation-input">
        <label>Current Occupation (optional)</label>
        <input type="text" id="occupation" placeholder="e.g., Registered Nurse, Electrician, Teacher">
    </div>

    <div class="occupation-input">
        <label>Years of Experience in This Field</label>
        <input type="number" id="experience" min="0" max="50" value="0">
    </div>

    <div class="occupation-input">
        <label>Relevant Certifications, Degrees, or Training (optional)</label>
        <textarea id="certifications" placeholder="List any formal training, licenses, certifications, or degrees relevant to practical skills"></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="skillsDetailed">
    <h2>Detailed Skills Inventory</h2>
    <p style="margin-bottom: 20px;">Rate your actual capability in each skill area:</p>

    <div class="skill-category">
        <h3>üî• Fire & Energy</h3>
        <div class="skill-item">
            <label>Starting fire without matches</label>
            <select id="skill-fire">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Basic electrical systems</label>
            <select id="skill-electrical">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Solar/alternative energy systems</label>
            <select id="skill-solar">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
    </div>

    <div class="skill-category">
        <h3>üíß Water & Sanitation</h3>
        <div class="skill-item">
            <label>Water purification methods</label>
            <select id="skill-water">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Plumbing & water systems</label>
            <select id="skill-plumbing">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Field sanitation practices</label>
            <select id="skill-sanitation">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
    </div>

    <div class="skill-category">
        <h3>üè† Shelter & Building</h3>
        <div class="skill-item">
            <label>Building emergency shelter</label>
            <select id="skill-shelter">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Carpentry & woodworking</label>
            <select id="skill-carpentry">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Basic masonry/stonework</label>
            <select id="skill-masonry">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
    </div>

    <div class="skill-category">
        <h3>ü©π Medical & First Aid</h3>
        <div class="skill-item">
            <label>Basic first aid</label>
            <select id="skill-firstaid">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Wound care & treatment</label>
            <select id="skill-wounds">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>CPR & emergency response</label>
            <select id="skill-cpr">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Herbal medicine knowledge</label>
            <select id="skill-herbal">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
    </div>

    <div class="skill-category">
        <h3>üçé Food & Nutrition</h3>
        <div class="skill-item">
            <label>Foraging edible plants</label>
            <select id="skill-foraging">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Hunting/fishing/trapping</label>
            <select id="skill-hunting">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Food preservation methods</label>
            <select id="skill-preservation">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Cooking without modern tools</label>
            <select id="skill-cooking">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
    </div>

    <div class="skill-category">
        <h3>üß≠ Navigation & Communication</h3>
        <div class="skill-item">
            <label>Map & compass navigation</label>
            <select id="skill-navigation">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Natural navigation (stars, sun)</label>
            <select id="skill-natural-nav">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Radio/emergency communication</label>
            <select id="skill-radio">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Signaling & rescue techniques</label>
            <select id="skill-signaling">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
    </div>

    <div class="skill-category">
        <h3>üîß Tools & Crafting</h3>
        <div class="skill-item">
            <label>Tool making & repair</label>
            <select id="skill-tools">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Metalworking/blacksmithing</label>
            <select id="skill-metal">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Rope work & knot tying</label>
            <select id="skill-rope">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
        <div class="skill-item">
            <label>Leatherworking & hide preparation</label>
            <select id="skill-leather">
                <option value="0">None</option>
                <option value="1">Beginner</option>
                <option value="2">Intermediate</option>
                <option value="3">Advanced</option>
            </select>
        </div>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Continue to Results</button>
    </div>
</div>

<div class="results-section" id="resultsSection">
    <div class="score-card">
        <h2 style="color: #667eea; margin-bottom: 20px;">Your Comprehensive Assessment Results</h2>
        <p style="margin-bottom: 20px;">Below is your complete profile combining psychological readiness and practical skills.</p>
    </div>

    <div class="score-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <h3 style="color: white; margin-bottom: 20px;">Your Preparedness Progress</h3>
        <div id="finalGamificationDisplay"></div>
        <div id="badgesDisplay" style="margin-top: 20px;"></div>
    </div>

    <div class="score-card">
        <h3 style="margin-bottom: 20px;">Psychological Profile</h3>
        
        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>üõ°Ô∏è North (Belonging)</strong></span>
                <span class="score-value" id="northScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="northBar"></div>
            </div>
            <p id="northArchetype" style="font-style: italic; color: #666;"></p>
        </div>

        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>‚ôüÔ∏è East (Strategy)</strong></span>
                <span class="score-value" id="eastScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="eastBar"></div>
            </div>
            <p id="eastArchetype" style="font-style: italic; color: #666;"></p>
        </div>

        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>üî• South (Innovation)</strong></span>
                <span class="score-value" id="southScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="southBar"></div>
            </div>
            <p id="southArchetype" style="font-style: italic; color: #666;"></p>
        </div>

        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>üåå West (Boundary)</strong></span>
                <span class="score-value" id="westScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="westBar"></div>
            </div>
            <p id="westArchetype" style="font-style: italic; color: #666;"></p>
        </div>
    </div>

    <div class="score-card">
        <h3 style="margin-bottom: 20px;">Practical Skills Profile</h3>
        <div id="skillsSummary"></div>
    </div>

    <div class="gap-analysis" id="gapAnalysis">
        <h3 style="color: #856404; margin-bottom: 15px;">Gap Analysis: Where Mindset Meets Reality</h3>
        <div id="gapContent"></div>
    </div>

    <div class="roadmap">
        <h3>Your 30/60/90 Day Development Roadmap</h3>
        <div id="roadmapContent"></div>
    </div>
    
    <div class="opportunities-section" id="jobOpportunitiesSection">
        <h3>Suggested Job Opportunities for You</h3>
        <div id="jobOpportunitiesList">
            <p>Loading jobs...</p>
        </div>
    </div>

    <div class="opportunities-section" id="eduOpportunitiesSection">
        <h3>Recommended Educational Programs</h3>
        <div id="eduOpportunitiesList">
            <p>Loading programs...</p>
        </div>
    </div>

    <div class="warning-box">
        <h4>‚ö†Ô∏è Warning Signs to Watch For</h4>
        <p>This roadmap pushes boundaries intentionally. Stop and reassess if:</p>
        <ul style="margin-left: 20px; margin-top: 10px;">
            <li>You feel panicked rather than challenged</li>
            <li>You're avoiding the psychological work and only doing skills practice</li>
            <li>You're taking unnecessary risks to "prove yourself"</li>
            <li>Social connections feel forced or performative</li>
            <li>You're comparing yourself negatively to others</li>
        </ul>
        <p style="margin-top: 10px;"><strong>Remember:</strong> This is about YOUR development at YOUR pace. The timeline is flexible.</p>
    </div>

    <div class="nav-buttons" style="justify-content: center;">
        <button class="btn btn-primary" onclick="restartAssessment()">Take Assessment Again</button>
    </div>
</div>

</div>

<script>
// --- GAMIFICATION SYSTEM ---
const BASE_XP = 100;
const LEVEL_FACTOR = 1.5;
const MAX_LEVEL = 100;

const userState = {
    preparednessLevel: 1,
    currentXP: 0,
    survivalScrip: 0,
    currentStreak: 0,
    lastActivityDate: null,
    skillLevels: {},
    unlockedBadges: []
};

const SKILL_BADGES = {
    'fire_1': 'Novice Fire Starter',
    'fire_2': 'Intermediate Pyromancer',
    'fire_3': 'Expert Flame Weaver',
    'fire_4': 'Master of Embers',
    'shelter_1': 'Novice Shelter Builder',
    'shelter_2': 'Intermediate Constructor',
    'shelter_3': 'Expert Architect',
    'shelter_4': 'Master Builder',
    'navigation_1': 'Novice Navigator',
    'navigation_2': 'Intermediate Pathfinder',
    'navigation_3': 'Expert Wayfinder',
    'navigation_4': 'Master Explorer',
    'water_1': 'Novice Water Purifier',
    'water_2': 'Intermediate Hydration Expert',
    'water_3': 'Expert Water Master',
    'water_4': 'Master of Life Source',
    'firstaid_1': 'Novice Healer',
    'firstaid_2': 'Intermediate Medic',
    'firstaid_3': 'Expert Field Surgeon',
    'firstaid_4': 'Master Life Saver'
};

function getXPForNextLevel(currentLevel) {
    if (currentLevel >= MAX_LEVEL) return Infinity;
    return Math.floor(BASE_XP * Math.pow(currentLevel, LEVEL_FACTOR));
}

function awardXP(xpAmount, user = userState) {
    user.currentXP += xpAmount;
    let xpNeeded = getXPForNextLevel(user.preparednessLevel);
    let leveledUp = false;

    while (user.currentXP >= xpNeeded && user.preparednessLevel < MAX_LEVEL) {
        user.currentXP -= xpNeeded;
        user.preparednessLevel += 1;
        xpNeeded = getXPForNextLevel(user.preparednessLevel);
        leveledUp = true;
    }

    if (leveledUp) {
        showLevelUpNotification(user.preparednessLevel);
    }
    updateGamificationUI();
    saveUserState();
}

function showLevelUpNotification(level) {
    const notification = document.createElement('div');
    notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; animation: slideIn 0.5s;';
    notification.innerHTML = `<h3 style="margin: 0 0 10px 0;">üéâ Level Up!</h3><p style="margin: 0;">Preparedness Level ${level} achieved!</p>`;
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 3000);
}

function levelUpSkill(skillId, user = userState) {
    const currentLevel = user.skillLevels[skillId] || 0;
    const newLevel = currentLevel + 1;

    if (newLevel > 4) return;

    user.skillLevels[skillId] = newLevel;
    const badgeId = `${skillId}_${newLevel}`;
    user.unlockedBadges.push(badgeId);
    awardXP(100, user);

    showBadgeUnlock(SKILL_BADGES[badgeId] || `${skillId} Level ${newLevel}`);
}

function showBadgeUnlock(badgeName) {
    const notification = document.createElement('div');
    notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #28a745; color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; animation: slideIn 0.5s;';
    notification.innerHTML = `<h3 style="margin: 0 0 10px 0;">üèÜ Badge Unlocked!</h3><p style="margin: 0;">${badgeName}</p>`;
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 3000);
}

function updateGamificationUI() {
    const gamifBar = document.getElementById('gamificationBar');
    if (!gamifBar) return;
    
    const xpNeeded = getXPForNextLevel(userState.preparednessLevel);
    const xpPercent = (userState.currentXP / xpNeeded) * 100;
    
    gamifBar.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <span><strong>P-Level ${userState.preparednessLevel}</strong></span>
            <span>${userState.currentXP} / ${xpNeeded} XP</span>
            <span>üí∞ ${userState.survivalScrip} Scrip</span>
        </div>
        <div style="height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
            <div style="height: 100%; width: ${xpPercent}%; background: linear-gradient(90deg, #28a745, #20c997); transition: width 0.3s;"></div>
        </div>
    `;
}

// --- PATCH 2: Mapping of quadrants and skill categories to broader industry keywords and primitive roots ---
const thematicIndustryMap = {
    north: {
        keywords: ['community manager', 'social worker', 'public health', 'administration', 'counseling'],
        primitiveRoots: ['tribe leadership', 'community bonding', 'oral tradition']
    },
    east: {
        keywords: ['risk management', 'security analyst', 'public safety', 'law enforcement', 'logistics'],
        primitiveRoots: ['sentinel watch', 'defense tactics', 'territory navigation']
    },
    south: {
        keywords: ['engineer', 'innovator', 'construction', 'system designer', 'entrepreneur'],
        primitiveRoots: ['tool making', 'fire mastery', 'constructive building']
    },
    west: {
        keywords: ['pilot', 'navigator', 'research scientist', 'psychologist', 'philosopher'],
        primitiveRoots: ['star navigation', 'boundary exploration', 'introspective ritual']
    }
};

// PATCH 2: Generates personalized keyword searches and primitive intervention themes
function generatePersonalizedSearchData(psychQuadrantScores, skillLevels) {
    const searches = [];
    
    for (const quadrant in psychQuadrantScores) {
        const score = psychQuadrantScores[quadrant];
        if (score && score > 40) {
            const info = thematicIndustryMap[quadrant];
            
            const relevantSkills = Object.keys(skillLevels).filter(skill => skillLevels[skill] >= 2);
            const keywords = [...info.keywords];
            
            const skillToKeywordMap = {
                fire: 'combustion', electrical: 'energy systems', solar: 'renewable energy', water: 'water management',
                carpentry: 'woodworking', firstaid: 'emergency medical', hunting: 'resource acquisition', navigation: 'field operations'
            };
            relevantSkills.forEach(skill => {
                keywords.push(skillToKeywordMap[skill] || skill.replace(/-/g, ' '));
            });
            
            searches.push({
                quadrant,
                keywords: Array.from(new Set(keywords)),
                primitiveTheme: info.primitiveRoots
            });
        }
    }
    
    return searches;
}

// PATCH 1: Utility function to identify skill gaps
function identifySkillGaps(skillsProfile) {
    return Object.entries(skillsProfile)
        .filter(([_, level]) => level < 2)
        .map(([skill]) => skill);
}

// PATCH 1: Mock function to simulate fetching job data
async function fetchJobOpportunities(searchData) {
    return [
        { title: "Emergency Response Coordinator", source: "Public Safety Office", url: "#" },
        { title: "Off-Grid Solar Installer", source: "Green Tech Solutions", url: "#" },
        { title: "Wilderness First Responder Instructor", source: "Outdoor School", url: "#" },
        { title: "Community Development Specialist", source: "Local NGO", url: "#" },
    ];
}

// PATCH 1: Mock function to simulate fetching educational course data
async function fetchEducationalPrograms(skillGaps) {
    return [
        { title: "Basic Wilderness Survival (Fire/Shelter Focus)", provider: "Online Survival School", url: "#" },
        { title: "Certified Plumbing Basics", provider: "Local Trade College", url: "#" },
        { title: "Beginner Metalworking Workshop", provider: "Community Forge", url: "#" },
    ];
}

// PATCH 1: Function to render job/edu opportunities
function renderOpportunities(containerId, items, type) {
    const container = document.getElementById(containerId);
    if (!items || items.length === 0) {
        container.innerHTML = '<p>No opportunities found matching your profile.</p>';
        return;
    }
    container.innerHTML = items.map(item => `
        <div class="opportunity-item" onclick="window.open('${item.url}', '_blank')">
            <div class="opportunity-title">${item.title}</div>
            <div class="opportunity-source">${type === 'job' ? 'Source' : 'Provider'}: ${item.source || item.provider}</div>
        </div>
    `).join('');
}

let currentSectionIndex = 0;
const sections = [
    'introSection',
    'psychNorth',
    'psychEast', 
    'psychSouth',
    'psychWest',
    'skillsIntro',
    'skillsDetailed'
];

const psychResponses = {
    north: {},
    east: {},
    south: {},
    west: {}
};

const skillLevels = {};

function updateProgress() {
    const progress = (currentSectionIndex / sections.length) * 100;
    document.getElementById('progressBar').style.width = progress + '%';
}

function startAssessment() {
    nextSection();
}

function nextSection() {
    const currentSection = sections[currentSectionIndex];
    document.getElementById(currentSection).classList.remove('active');
    
    saveCurrentSection();
    
    if (currentSection.startsWith('psych')) {
        awardXP(25, userState);
    } else if (currentSection === 'skillsDetailed') {
        awardXP(50, userState);
    }
    
    currentSectionIndex++;
    
    if (currentSectionIndex < sections.length) {
        document.getElementById(sections[currentSectionIndex]).classList.add('active');
        updateProgress();
    } else {
        generateResults();
    }
}

function previousSection() {
    const currentSection = sections[currentSectionIndex];
    document.getElementById(currentSection).classList.remove('active');
    
    currentSectionIndex--;
    
    if (currentSectionIndex >= 0) {
        document.getElementById(sections[currentSectionIndex]).classList.add('active');
        updateProgress();
    }
}

function saveCurrentSection() {
    const currentSection = sections[currentSectionIndex];
    
    if (currentSection === 'psychNorth') {
        psychResponses.north = {
            q1: document.getElementById('north1').value,
            q2: document.getElementById('north2').value,
            q3: document.getElementById('north3').value
        };
    } else if (currentSection === 'psychEast') {
        psychResponses.east = {
            q1: document.getElementById('east1').value,
            q2: document.getElementById('east2').value,
            q3: document.getElementById('east3').value
        };
    } else if (currentSection === 'psychSouth') {
        psychResponses.south = {
            q1: document.getElementById('south1').value,
            q2: document.getElementById('south2').value,
            q3: document.getElementById('south3').value
        };
    } else if (currentSection === 'psychWest') {
        psychResponses.west = {
            q1: document.getElementById('west1').value,
            q2: document.getElementById('west2').value,
            q3: document.getElementById('west3').value
        };
    }
    
    if (currentSection === 'skillsDetailed') {
        const skillIds = [
            'fire', 'electrical', 'solar', 'water', 'plumbing', 'sanitation',
            'shelter', 'carpentry', 'masonry', 'firstaid', 'wounds', 'cpr', 'herbal',
            'foraging', 'hunting', 'preservation', 'cooking', 'navigation', 'natural-nav',
            'radio', 'signaling', 'tools', 'metal', 'rope', 'leather'
        ];
        
        skillIds.forEach(id => {
            const element = document.getElementById('skill-' + id);
            if (element) {
                skillLevels[id] = parseInt(element.value);
            }
        });
    }
}

function analyzeText(text) {
    if (!text || text.trim().length === 0) return { score: 0, wordCount: 0 };
    
    const words = text.split(/\s+/).filter(w => w.length > 0);
    const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
    
    const keywords = {
        north: /\b(belong|accept|include|community|group|team|family|friend|together|connect)\b/gi,
        east: /\b(careful|safe|protect|avoid|risk|danger|trust|politics|navigate|strategy)\b/gi,
        south: /\b(change|challenge|create|build|achieve|goal|success|push|rebel|innovate)\b/gi,
        west: /\b(explore|limit|edge|beyond|unknown|mystery|intense|overwhelming|transcend)\b/gi
    };
    
    const emotionalWords = /\b(feel|emotion|heart|passionate|love|fear|angry|sad|happy|excited)\b/gi;
    
    const wordScore = Math.min(words.length / 50, 1) * 30;
    const diversityScore = (new Set(words.map(w => w.toLowerCase())).size / words.length) * 20;
    const emotionalScore = Math.min((text.match(emotionalWords) || []).length, 5) * 10;
    
    return {
        score: Math.round(wordScore + diversityScore + emotionalScore),
        wordCount: words.length
    };
}

function calculateQuadrantScore(quadrant) {
    const responses = psychResponses[quadrant];
    let totalScore = 0;
    let responseCount = 0;
    
    for (let key in responses) {
        const analysis = analyzeText(responses[key]);
        totalScore += analysis.score;
        if (analysis.wordCount > 0) responseCount++;
    }
    
    return responseCount > 0 ? Math.min(Math.round(totalScore / responseCount), 100) : 0;
}

function getArchetype(quadrant, score) {
    const archetypes = {
        north: {
            high: "The Connector - You're a natural community builder who thrives on genuine relationships",
            medium: "The Seeker - You're actively working to find your tribe and place in the world",
            low: "The Independent - You value authentic connections over superficial acceptance"
        },
        east: {
            high: "The Navigator - You excel at reading complex social situations and moving wisely",
            medium: "The Cautious - You carefully assess social dynamics before engaging",
            low: "The Direct - You prefer straightforward interactions over political maneuvering"
        },
        south: {
            high: "The Changemaker - You're driven to improve systems and create lasting impact",
            medium: "The Innovator - You balance working within and challenging existing structures",
            low: "The Collaborator - You prefer working within existing structures to create change"
        },
        west: {
            high: "The Explorer - You're comfortable pushing limits and venturing into unknown territory",
            medium: "The Curious - You're drawn to new experiences while maintaining healthy boundaries",
            low: "The Grounded - You find strength in stability and clear boundaries"
        }
    };
    
    const level = score >= 70 ? 'high' : (score >= 40 ? 'medium' : 'low');
    return archetypes[quadrant][level];
}

function calculateSkillsAverage() {
    const values = Object.values(skillLevels);
    if (values.length === 0) return 0;
    const sum = values.reduce((a, b) => a + b, 0);
    return Math.round((sum / values.length / 3) * 100);
}

function getSkillCategory(avgScore) {
    if (avgScore >= 66) return 'Advanced';
    if (avgScore >= 33) return 'Intermediate';
    return 'Beginner';
}

async function generateResults() {
    sections.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.classList.remove('active');
    });
    
    const psychScores = {
        north: calculateQuadrantScore('north'),
        east: calculateQuadrantScore('east'),
        south: calculateQuadrantScore('south'),
        west: calculateQuadrantScore('west')
    };
    
    for (let quadrant in psychScores) {
        const score = psychScores[quadrant];
        const scoreEl = document.getElementById(quadrant + 'Score');
        const barEl = document.getElementById(quadrant + 'Bar');
        const archetypeEl = document.getElementById(quadrant + 'Archetype');
        
        scoreEl.textContent = score;
        scoreEl.className = 'score-value ' + (score >= 70 ? 'high' : score >= 40 ? 'medium' : 'low');
        
        setTimeout(() => {
            barEl.style.width = score + '%';
            barEl.className = 'score-bar-fill ' + (score >= 70 ? 'high' : score >= 40 ? 'medium' : 'low');
        }, 100);
        
        archetypeEl.textContent = getArchetype(quadrant, score);
    }
    
    const skillsAvg = calculateSkillsAverage();
    const skillCategory = getSkillCategory(skillsAvg);
    
    const skillsSummary = document.getElementById('skillsSummary');
    skillsSummary.innerHTML = `
        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>Overall Practical Competency</strong></span>
                <span class="score-value ${skillsAvg >= 66 ? 'high' : skillsAvg >= 33 ? 'medium' : 'low'}">${skillsAvg}%</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill ${skillsAvg >= 66 ? 'high' : skillsAvg >= 33 ? 'medium' : 'low'}" style="width: ${skillsAvg}%"></div>
            </div>
            <p style="margin-top: 10px; font-style: italic;">Category: ${skillCategory}</p>
        </div>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 0.9rem;">
            ${generateSkillBreakdown()}
        </div>
    `;
    
    generateGapAnalysis(psychScores, skillsAvg);
    generateRoadmap(psychScores, skillsAvg);

    awardXP(100, userState);
    userState.survivalScrip += 100;
    
    for (let skillId in skillLevels) {
        const level = skillLevels[skillId];
        if (level > 0 && !userState.skillLevels[skillId]) {
            userState.skillLevels[skillId] = level;
            for (let i = 1; i <= level; i++) {
                const badgeId = `${skillId}_${i}`;
                if (!userState.unlockedBadges.includes(badgeId)) {
                    userState.unlockedBadges.push(badgeId);
                }
            }
        }
    }
    
    updateGamificationUI();
    
    const searchData = generatePersonalizedSearchData(psychScores, skillLevels);
    const skillGaps = identifySkillGaps(skillLevels);
    
    const jobs = await fetchJobOpportunities(searchData);
    const educations = await fetchEducationalPrograms(skillGaps);

    renderOpportunities('jobOpportunitiesList', jobs, 'job');
    renderOpportunities('eduOpportunitiesList', educations, 'education');
    
    document.getElementById('resultsSection').classList.add('active');
    
    const xpNeeded = getXPForNextLevel(userState.preparednessLevel);
    const xpPercent = (userState.currentXP / xpNeeded) * 100;
    
    document.getElementById('finalGamificationDisplay').innerHTML = `
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center;">
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${userState.preparednessLevel}</div>
                <div>Preparedness Level</div>
            </div>
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${userState.currentXP}</div>
                <div>Total XP Earned</div>
            </div>
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${userState.survivalScrip}</div>
                <div>Survival Scrip</div>
            </div>
        </div>
        <div style="margin-top: 20px; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Progress to Level ${userState.preparednessLevel + 1}</span>
                <span>${userState.currentXP} / ${xpNeeded} XP</span>
            </div>
            <div style="height: 12px; background: rgba(0,0,0,0.2); border-radius: 6px; overflow: hidden;">
                <div style="height: 100%; width: ${xpPercent}%; background: linear-gradient(90deg, #28a745, #20c997); transition: width 0.3s;"></div>
            </div>
        </div>
    `;
    
    if (userState.unlockedBadges.length > 0) {
        const badgeHTML = userState.unlockedBadges.map(badgeId => {
            const badgeName = SKILL_BADGES[badgeId] || badgeId;
            return `<div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 6px; display: inline-block; margin: 5px;">
                üèÜ ${badgeName}
            </div>`;
        }).join('');
        document.getElementById('badgesDisplay').innerHTML = `
            <h4 style="color: white; margin-bottom: 10px;">Badges Earned (${userState.unlockedBadges.length})</h4>
            <div>${badgeHTML}</div>
        `;
    }
    
    updateProgress();
}

function generateSkillBreakdown() {
    const skillNames = {
        fire: 'Fire Starting',
        electrical: 'Electrical',
        solar: 'Solar Energy',
        water: 'Water Purification',
        plumbing: 'Plumbing',
        sanitation: 'Sanitation',
        shelter: 'Shelter Building',
        carpentry: 'Carpentry',
        masonry: 'Masonry',
        firstaid: 'First Aid',
        wounds: 'Wound Care',
        cpr: 'CPR',
        herbal: 'Herbal Medicine',
        foraging: 'Foraging',
        hunting: 'Hunting/Fishing',
        preservation: 'Food Preservation',
        cooking: 'Primitive Cooking',
        navigation: 'Map/Compass Nav',
        'natural-nav': 'Natural Navigation',
        radio: 'Radio/Comms',
        signaling: 'Signaling',
        tools: 'Tool Making',
        metal: 'Metalworking',
        rope