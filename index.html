<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comprehensive Career Readiness Assessment</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
color: #333;
}

.container {
max-width: 1000px;
margin: 0 auto;
padding: 20px;
}

header {
background: white;
padding: 30px;
border-radius: 12px;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
margin-bottom: 20px;
text-align: center;
}

header h1 {
font-size: 2rem;
color: #667eea;
margin-bottom: 10px;
}

.safety-warning {
background: #fff3cd;
border: 2px solid #ffc107;
border-radius: 8px;
padding: 20px;
margin-bottom: 20px;
}

.safety-warning h3 {
color: #856404;
margin-bottom: 10px;
}

.section {
background: white;
padding: 30px;
border-radius: 12px;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
margin-bottom: 20px;
display: none;
}

.section.active { display: block; }

.section h2 {
color: #667eea;
margin-bottom: 20px;
font-size: 1.5rem;
}

.quadrant-intro {
background: #f8f9fa;
padding: 20px;
border-radius: 8px;
margin-bottom: 20px;
}

.question-block {
margin-bottom: 25px;
padding: 20px;
background: #f8f9fa;
border-radius: 8px;
}

.question-block h3 {
font-size: 1.1rem;
margin-bottom: 15px;
color: #333;
}

.question-block textarea {
width: 100%;
min-height: 120px;
padding: 12px;
border: 2px solid #e0e0e0;
border-radius: 6px;
font-family: inherit;
font-size: 0.95rem;
resize: vertical;
}

.skill-category {
margin-bottom: 20px;
padding: 18px;
background: #f8f9fa;
border-radius: 8px;
border-left: 4px solid #667eea;
}

.skill-category h3 {
font-size: 1.05rem;
margin-bottom: 12px;
color: #667eea;
cursor: pointer;
user-select: none;
display: flex;
justify-content: space-between;
align-items: center;
}

.skill-category h3:hover {
color: #5568d3;
}

.skill-item {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
padding: 8px 12px;
background: white;
border-radius: 6px;
}

.skill-item label {
flex: 1;
font-weight: 500;
font-size: 0.95rem;
}

.skill-item select {
padding: 6px 12px;
border: 2px solid #e0e0e0;
border-radius: 4px;
font-size: 0.9rem;
}

.nav-buttons {
display: flex;
gap: 15px;
justify-content: space-between;
margin-top: 30px;
}

.btn {
padding: 12px 30px;
border: none;
border-radius: 6px;
font-size: 1rem;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
}

.btn-primary {
background: #667eea;
color: white;
}

.btn-primary:hover {
background: #5568d3;
transform: translateY(-2px);
}

.btn-secondary {
background: #e0e0e0;
color: #333;
}

.btn-special {
background: #28a745;
color: white;
margin-top: 20px;
}

.btn-special:hover {
background: #218838;
transform: translateY(-2px);
}

.progress-bar {
height: 4px;
background: #e0e0e0;
border-radius: 2px;
margin-bottom: 20px;
overflow: hidden;
}

.progress-fill {
height: 100%;
background: linear-gradient(90deg, #667eea, #764ba2);
transition: width 0.3s;
}

.results-section {
display: none;
}

.results-section.active {
display: block;
}

.score-card {
background: white;
padding: 25px;
border-radius: 12px;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
margin-bottom: 20px;
}

.score-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 15px;
}

.score-value {
font-size: 2rem;
font-weight: bold;
}

.score-value.high { color: #28a745; }
.score-value.medium { color: #ffc107; }
.score-value.low { color: #dc3545; }

.score-bar {
height: 8px;
background: #e0e0e0;
border-radius: 4px;
overflow: hidden;
margin-bottom: 15px;
}

.score-bar-fill {
height: 100%;
transition: width 1s;
}

.score-bar-fill.high { background: #28a745; }
.score-bar-fill.medium { background: #ffc107; }
.score-bar-fill.low { background: #dc3545; }

.info-box {
background: #d4edda;
border: 2px solid #28a745;
border-radius: 8px;
padding: 15px;
margin: 15px 0;
}

.warning-box {
background: #f8d7da;
border: 2px solid #dc3545;
border-radius: 8px;
padding: 15px;
margin: 15px 0;
}

.cluster-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
gap: 15px;
margin: 20px 0;
}

.cluster-card {
background: white;
padding: 15px;
border-radius: 8px;
border: 2px solid #e0e0e0;
cursor: pointer;
transition: all 0.3s;
}

.cluster-card:hover {
border-color: #667eea;
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(102,126,234,0.2);
}

.cluster-card.selected {
border-color: #667eea;
background: #f0f4ff;
}

.pathway-card {
background: #f8f9fa;
border: 2px solid #e0e0e0;
border-radius: 8px;
padding: 20px;
margin-bottom: 15px;
}

.pathway-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 15px;
}

.pathway-steps {
display: grid;
gap: 10px;
margin-top: 15px;
}

.pathway-step {
background: white;
padding: 12px;
border-radius: 6px;
border-left: 4px solid #667eea;
}
</style>
</head>
<body>
<div class="container">
    <header>
        <h1>Comprehensive Career Readiness Assessment</h1>
        <p>250+ Career Pathways | Evidence-Based Skill Development | Verified Progression Tracking</p>
    </header>

<div class="safety-warning">
    <h3>Assessment & Verification Requirements</h3>
    <ul style="margin-left: 20px;">
        <li><strong>CR-Level 1-20:</strong> Self-assessment, foundational knowledge</li>
        <li><strong>CR-Level 21-50:</strong> Certification upload or instructor verification required</li>
        <li><strong>CR-Level 51-80:</strong> Professional certification ID + documented experience</li>
        <li><strong>CR-Level 81-100:</strong> Teaching credentials + proof of mentoring others</li>
    </ul>
</div>

<div id="gamificationBar" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <span><strong>CR-Level 1</strong></span>
        <span>0 / 100 XP</span>
        <span>Status: Self-Assessment</span>
    </div>
    <div style="height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
        <div style="height: 100%; width: 0%; background: linear-gradient(90deg, #28a745, #20c997); transition: width 0.3s;"></div>
    </div>
</div>

<div class="progress-bar">
    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
</div>

<div class="section active" id="introSection">
    <h2>Welcome to Your Career Development Journey</h2>
    <p style="margin-bottom: 20px; line-height: 1.6;">This comprehensive assessment evaluates workplace readiness and technical competencies across 15 major career clusters with 250+ specific pathways.</p>
    
    <div class="info-box">
        <h4>What You'll Receive:</h4>
        <ul style="margin-left: 20px; margin-top: 10px;">
            <li>Workplace aptitude profile across 4 behavioral dimensions</li>
            <li>Technical skills inventory with honest capability assessment</li>
            <li>Degree pathway mapping (certificates, associates, bachelors, apprenticeships)</li>
            <li>Personalized career development roadmap with verification requirements</li>
            <li>Required licenses, certifications, and educational credentials by field</li>
        </ul>
    </div>

    <div class="nav-buttons">
        <div></div>
        <button class="btn btn-primary" onclick="startAssessment()">Begin Assessment</button>
    </div>
</div>

<div class="section" id="psychNorth">
    <div class="quadrant-intro">
        <h2>Team Dynamics & Workplace Culture</h2>
        <p><strong>Focus:</strong> Collaboration, workplace relationships, organizational fit</p>
    </div>

    <div class="question-block">
        <h3>How important is it for you to feel valued and recognized by your team or organization?</h3>
        <textarea id="north1" placeholder="Reflect on times when you felt included versus isolated..."></textarea>
    </div>

    <div class="question-block">
        <h3>Describe a work situation where you sought feedback or recognition from colleagues.</h3>
        <textarea id="north2" placeholder="What motivated you to seek that validation?"></textarea>
    </div>

    <div class="question-block">
        <h3>What does being part of a strong team mean to you?</h3>
        <textarea id="north3" placeholder="Think about signs that you're a good cultural fit..."></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="psychEast">
    <div class="quadrant-intro">
        <h2>Risk Assessment & Safety Protocols</h2>
        <p><strong>Focus:</strong> Workplace safety, risk management, strategic thinking</p>
    </div>

    <div class="question-block">
        <h3>How do you handle situations with potential safety risks or workplace hazards?</h3>
        <textarea id="east1" placeholder="Describe your approach to identifying risks..."></textarea>
    </div>

    <div class="question-block">
        <h3>Tell me about a time you avoided a task because it felt unsafe or you lacked training.</h3>
        <textarea id="east2" placeholder="What were you protecting yourself from?"></textarea>
    </div>

    <div class="question-block">
        <h3>How do you protect yourself and coworkers in environments with hazards?</h3>
        <textarea id="east3" placeholder="Think about your safety strategies..."></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="psychSouth">
    <div class="quadrant-intro">
        <h2>Problem-Solving & Technical Creativity</h2>
        <p><strong>Focus:</strong> Innovation, process improvement, technical adaptability</p>
    </div>

    <div class="question-block">
        <h3>When do you feel motivated to improve processes or challenge inefficient procedures?</h3>
        <textarea id="south1" placeholder="Think about times you've identified better ways..."></textarea>
    </div>

    <div class="question-block">
        <h3>Describe a technical problem you worked hard to solve despite obstacles.</h3>
        <textarea id="south2" placeholder="What drove you to persist?"></textarea>
    </div>

    <div class="question-block">
        <h3>How important is it to develop new skills and advance technically?</h3>
        <textarea id="south3" placeholder="What does professional growth mean to you?"></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="psychWest">
    <div class="quadrant-intro">
        <h2>Workplace Pressure & Learning Agility</h2>
        <p><strong>Focus:</strong> Stress management, adaptability, continuous learning</p>
    </div>

    <div class="question-block">
        <h3>How do you handle high-pressure situations or tight deadlines?</h3>
        <textarea id="west1" placeholder="Describe your stress management strategies..."></textarea>
    </div>

    <div class="question-block">
        <h3>What draws you to learn new technical skills or take on unfamiliar tasks?</h3>
        <textarea id="west2" placeholder="Think about stepping outside your comfort zone..."></textarea>
    </div>

    <div class="question-block">
        <h3>How do you approach situations where you need to learn on the job?</h3>
        <textarea id="west3" placeholder="Describe your relationship with uncertainty..."></textarea>
    </div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Next</button>
    </div>
</div>

<div class="section" id="clusterSelection">
    <h2>Select Your Career Interest Areas</h2>
    <p style="margin-bottom: 20px;">Choose 1-5 career clusters that interest you most. You'll assess specific skills within these areas.</p>
    
    <div class="cluster-grid" id="clusterGrid"></div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="proceedToSkills()">Continue to Skills Assessment</button>
    </div>
</div>

<div class="section" id="skillsDetailed">
    <h2>Technical Competencies Assessment</h2>
    <p style="margin-bottom: 20px;">Rate your actual capability in each skill area. Click category names to expand:</p>
    
    <div id="selectedSkillsContainer"></div>

    <div class="nav-buttons">
        <button class="btn btn-secondary" onclick="previousSection()">Previous</button>
        <button class="btn btn-primary" onclick="nextSection()">Continue to Results</button>
    </div>
</div>

<div class="results-section" id="resultsSection">
    <div class="score-card">
        <h2 style="color: #667eea; margin-bottom: 20px;">Your Comprehensive Career Readiness Profile</h2>
    </div>

    <div class="score-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <h3 style="color: white; margin-bottom: 20px;">Career Readiness Progress</h3>
        <div id="finalGamificationDisplay"></div>
    </div>

    <div class="score-card">
        <h3 style="margin-bottom: 20px;">Workplace Aptitude Profile</h3>
        
        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>Team Dynamics & Culture Fit</strong></span>
                <span class="score-value" id="northScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="northBar"></div>
            </div>
            <p id="northArchetype" style="font-style: italic; color: #666;"></p>
        </div>

        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>Risk Assessment & Safety</strong></span>
                <span class="score-value" id="eastScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="eastBar"></div>
            </div>
            <p id="eastArchetype" style="font-style: italic; color: #666;"></p>
        </div>

        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>Problem-Solving & Technical Creativity</strong></span>
                <span class="score-value" id="southScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="southBar"></div>
            </div>
            <p id="southArchetype" style="font-style: italic; color: #666;"></p>
        </div>

        <div style="margin-bottom: 20px;">
            <div class="score-header">
                <span><strong>Workplace Pressure & Learning Agility</strong></span>
                <span class="score-value" id="westScore">0</span>
            </div>
            <div class="score-bar">
                <div class="score-bar-fill" id="westBar"></div>
            </div>
            <p id="westArchetype" style="font-style: italic; color: #666;"></p>
        </div>
    </div>

    <div class="score-card">
        <h3 style="margin-bottom: 20px;">Technical Competencies Profile</h3>
        <div id="skillsSummary"></div>
    </div>

    <div class="score-card">
        <h3 style="margin-bottom: 20px;">Recommended Education Pathways</h3>
        <div id="degreePathways"></div>
    </div>

    <div class="score-card">
        <h3 style="margin-bottom: 20px;">🎯 Your Top 3 Personalized College Major Recommendations</h3>
        <p style="color: #666; margin-bottom: 20px;">Based on your skills assessment and workplace aptitude profile, here are three majors that align with your strengths:</p>
        <div id="majorRecommendations"></div>
    </div>

    <div style="text-align: center;">
        <button class="btn btn-special" onclick="openMajorSelector()">🎓 Explore All College Majors & Transfer Pathways</button>
    </div>

    <div class="nav-buttons" style="justify-content: center; margin-top: 20px;">
        <button class="btn btn-primary" onclick="location.reload()">Start New Assessment</button>
    </div>
</div>

</div>

<script>
const CAREER_CLUSTERS = {
    construction: {
        name: "Construction & Building Trades",
        icon: "🏗️",
        skills: {
            'carpentry': 'Carpentry (framing, finish, cabinetry)',
            'electrical': 'Electrical systems',
            'plumbing': 'Plumbing',
            'hvac': 'HVAC',
            'masonry': 'Masonry & concrete',
            'roofing': 'Roofing'
        }
    },
    manufacturing: {
        name: "Manufacturing & Industrial",
        icon: "⚙️",
        skills: {
            'cnc': 'CNC machining',
            'welding': 'Welding',
            'metalfab': 'Metal fabrication',
            'qc': 'Quality control',
            'industrial-maint': 'Industrial maintenance',
            'plc': 'PLC programming'
        }
    },
    automotive: {
        name: "Automotive & Transportation",
        icon: "🚗",
        skills: {
            'auto-repair': 'Automotive repair',
            'diesel': 'Diesel mechanics',
            'collision': 'Collision repair',
            'cdl': 'Commercial driving'
        }
    },
    healthcare_clinical: {
        name: "Healthcare - Clinical & Patient Care",
        icon: "🏥",
        skills: {
            'cna': 'Certified Nursing Assistant',
            'lpn': 'Licensed Practical Nurse',
            'rn': 'Registered Nurse',
            'nurse-practitioner': 'Nurse Practitioner',
            'respiratory-therapy': 'Respiratory Therapy',
            'occupational-therapy': 'Occupational Therapy',
            'physical-therapy': 'Physical Therapy',
            'speech-language': 'Speech-Language Pathology',
            'surgical-tech': 'Surgical Technology',
            'er-nursing': 'Emergency/Trauma Nursing',
            'icu-nursing': 'ICU/Critical Care Nursing',
            'pediatric-nursing': 'Pediatric Nursing'
        }
    },
    healthcare_diagnostic: {
        name: "Healthcare - Diagnostic & Laboratory",
        icon: "🔬",
        skills: {
            'rad-tech': 'Radiologic Technology',
            'ultrasound': 'Diagnostic Medical Sonography',
            'mri-tech': 'MRI Technology',
            'ct-tech': 'CT Technology',
            'nuclear-med': 'Nuclear Medicine Technology',
            'clinical-lab': 'Clinical Laboratory Science',
            'phlebotomy': 'Phlebotomy',
            'histotech': 'Histotechnology',
            'cytotech': 'Cytotechnology',
            'cardiovascular-tech': 'Cardiovascular Technology'
        }
    },
    healthcare_allied: {
        name: "Healthcare - Allied Health",
        icon: "💊",
        skills: {
            'dental-hygiene': 'Dental Hygiene',
            'dental-assistant': 'Dental Assisting',
            'pharmacy-tech': 'Pharmacy Technician',
            'pharmacist': 'Pharmacist (PharmD)',
            'med-coding': 'Medical Coding',
            'health-info': 'Health Information Management',
            'sterile-processing': 'Sterile Processing',
            'emt-paramedic': 'Emergency Medical Services'
        }
    },
    mental_health: {
        name: "Mental & Behavioral Health",
        icon: "🧠",
        skills: {
            'clinical-psych': 'Clinical Psychology',
            'counseling': 'Professional Counseling',
            'social-work': 'Social Work (MSW/LCSW)',
            'substance-abuse': 'Substance Abuse Counseling',
            'marriage-family': 'Marriage & Family Therapy',
            'psychiatric-nursing': 'Psychiatric/Mental Health Nursing',
            'aba-therapy': 'Applied Behavior Analysis',
            'crisis-intervention': 'Crisis Intervention',
            'case-management': 'Case Management'
        }
    },
    education: {
        name: "Education & Teaching",
        icon: "📚",
        skills: {
            'early-childhood': 'Early Childhood Education',
            'elementary-ed': 'Elementary Education',
            'secondary-math': 'Secondary Education - Mathematics',
            'secondary-science': 'Secondary Education - Science',
            'secondary-english': 'Secondary Education - English',
            'secondary-social': 'Secondary Education - Social Studies',
            'special-ed': 'Special Education',
            'esl': 'ESL/TESOL',
            'adult-ed': 'Adult Education',
            'corporate-training': 'Corporate Training',
            'instructional-design': 'Instructional Design',
            'school-counseling': 'School Counseling',
            'ed-admin': 'Educational Administration',
            'library-science': 'Library Science'
        }
    },
    it: {
        name: "Information Technology",
        icon: "💻",
        skills: {
            'helpdesk': 'Help desk support',
            'network-admin': 'Network administration',
            'cybersecurity': 'Cybersecurity',
            'database': 'Database management',
            'cloud': 'Cloud computing',
            'programming': 'Programming',
            'webdev': 'Web development',
            'data-science': 'Data Science',
            'systems-admin': 'Systems Administration'
        }
    },
    stem_bio: {
        name: "STEM - Biology & Life Sciences",
        icon: "🧬",
        skills: {
            'microbiology': 'Microbiology',
            'molecular-bio': 'Molecular Biology',
            'biotechnology': 'Biotechnology',
            'genetics': 'Genetics',
            'ecology': 'Ecology',
            'marine-bio': 'Marine Biology',
            'wildlife-bio': 'Wildlife Biology',
            'forensic-science': 'Forensic Science',
            'food-science': 'Food Science',
            'agricultural-science': 'Agricultural Science',
            'environmental-science': 'Environmental Science'
        }
    },
    stem_physical: {
        name: "STEM - Physical Sciences",
        icon: "⚗️",
        skills: {
            'chemistry': 'Chemistry',
            'biochemistry': 'Biochemistry',
            'analytical-chem': 'Analytical Chemistry',
            'materials-science': 'Materials Science',
            'geology': 'Geology',
            'atmospheric': 'Atmospheric Science',
            'oceanography': 'Oceanography',
            'physics': 'Physics',
            'astronomy': 'Astronomy'
        }
    },
    stem_math: {
        name: "STEM - Mathematics & Statistics",
        icon: "📊",
        skills: {
            'applied-math': 'Applied Mathematics',
            'statistics': 'Statistics',
            'data-science-math': 'Data Science',
            'actuarial': 'Actuarial Science',
            'operations-research': 'Operations Research'
        }
    },
    engineering: {
        name: "Architecture & Engineering",
        icon: "🏛️",
        skills: {
            'architecture': 'Architecture',
            'civil-eng': 'Civil Engineering',
            'structural-eng': 'Structural Engineering',
            'mechanical-eng': 'Mechanical Engineering',
            'electrical-eng': 'Electrical Engineering',
            'chemical-eng': 'Chemical Engineering',
            'aerospace-eng': 'Aerospace Engineering',
            'biomedical-eng': 'Biomedical Engineering',
            'environmental-eng': 'Environmental Engineering',
            'industrial-eng': 'Industrial Engineering',
            'systems-eng': 'Systems Engineering',
            'surveying': 'Surveying',
            'urban-planning': 'Urban Planning',
            'landscape-arch': 'Landscape Architecture'
        }
    },
    public_safety: {
        name: "Public Safety & Emergency Services",
        icon: "🚨",
        skills: {
            'law-enforcement': 'Law Enforcement',
            'firefighting': 'Firefighting',
            'emergency-mgmt': 'Emergency Management',
            'corrections': 'Corrections',
            'security-mgmt': 'Security Management',
            'crime-scene': 'Crime Scene Investigation',
            'fire-investigation': 'Fire Investigation'
        }
    },
    legal: {
        name: "Legal & Paralegal Services",
        icon: "⚖️",
        skills: {
            'paralegal': 'Paralegal Studies',
            'legal-assistant': 'Legal Assistant',
            'court-reporting': 'Court Reporting',
            'legal-research': 'Legal Research',
            'compliance': 'Compliance Specialist'
        }
    },
    agriculture: {
        name: "Agriculture & Natural Resources",
        icon: "🌾",
        skills: {
            'crop-science': 'Crop Science',
            'animal-science': 'Animal Science',
            'horticulture': 'Horticulture',
            'forestry': 'Forestry',
            'fisheries': 'Fisheries',
            'soil-science': 'Soil Science',
            'ag-equipment': 'Agricultural Equipment Operation',
            'sustainable-ag': 'Sustainable Agriculture'
        }
    }
};

let selectedClusters = [];
let userState = {
    psychologicalScores: {north: 0, east: 0, south: 0, west: 0},
    skillLevels: {},
    careerReadinessLevel: 1,
    currentXP: 0
};

let currentSectionIndex = 0;
const sections = ['introSection', 'psychNorth', 'psychEast', 'psychSouth', 'psychWest', 'clusterSelection', 'skillsDetailed'];
const psychResponses = {north: {}, east: {}, south: {}, west: {}};
const skillLevels = {};

function updateProgress() {
    const progress = (currentSectionIndex / sections.length) * 100;
    document.getElementById('progressBar').style.width = progress + '%';
}

function startAssessment() {
    renderClusterSelection();
    nextSection();
}

function renderClusterSelection() {
    const grid = document.getElementById('clusterGrid');
    grid.innerHTML = Object.keys(CAREER_CLUSTERS).map(id => {
        const cluster = CAREER_CLUSTERS[id];
        return `
            <div class="cluster-card" onclick="toggleCluster('${id}')" id="cluster-${id}">
                <div style="font-size: 2rem; margin-bottom: 10px;">${cluster.icon}</div>
                <h4 style="color: #667eea; margin-bottom: 5px; font-size: 0.95rem;">${cluster.name}</h4>
                <p style="font-size: 0.85rem; color: #666;">${Object.keys(cluster.skills).length} skills</p>
            </div>
        `;
    }).join('');
}

function toggleCluster(clusterId) {
    const card = document.getElementById('cluster-' + clusterId);
    if (selectedClusters.includes(clusterId)) {
        selectedClusters = selectedClusters.filter(id => id !== clusterId);
        card.classList.remove('selected');
    } else {
        if (selectedClusters.length < 5) {
            selectedClusters.push(clusterId);
            card.classList.add('selected');
        } else {
            alert('Please select a maximum of 5 career clusters');
        }
    }
}

function proceedToSkills() {
    if (selectedClusters.length === 0) {
        alert('Please select at least 1 career cluster');
        return;
    }
    
    renderSelectedSkills();
    nextSection();
}

function renderSelectedSkills() {
    const container = document.getElementById('selectedSkillsContainer');
    
    container.innerHTML = selectedClusters.map(clusterId => {
        const cluster = CAREER_CLUSTERS[clusterId];
        const skills = cluster.skills;
        
        return `
            <div class="skill-category">
                <h3 onclick="toggleCategory('${clusterId}')">${cluster.icon} ${cluster.name} <span id="${clusterId}-toggle">▼</span></h3>
                <div id="${clusterId}-skills" style="display: none; margin-top: 15px;">
                    ${Object.entries(skills).map(([id, name]) => `
                        <div class="skill-item">
                            <label>${name}</label>
                            <select id="skill-${id}">
                                <option value="0">None</option>
                                <option value="1">Beginner</option>
                                <option value="2">Intermediate</option>
                                <option value="3">Advanced</option>
                            </select>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }).join('');
}

function toggleCategory(categoryId) {
    const skillsDiv = document.getElementById(categoryId + '-skills');
    const toggleIcon = document.getElementById(categoryId + '-toggle');
    
    if (skillsDiv.style.display === 'none') {
        skillsDiv.style.display = 'block';
        toggleIcon.textContent = '▲';
    } else {
        skillsDiv.style.display = 'none';
        toggleIcon.textContent = '▼';
    }
}

function nextSection() {
    const currentSection = sections[currentSectionIndex];
    document.getElementById(currentSection).classList.remove('active');
    
    saveCurrentSection();
    
    currentSectionIndex++;
    
    if (currentSectionIndex < sections.length) {
        document.getElementById(sections[currentSectionIndex]).classList.add('active');
        updateProgress();
</script>
</body>
</html>
    } else {
        generateResults();
    }
}

function previousSection() {
    const currentSection = sections[currentSectionIndex];
    document.getElementById(currentSection).classList.remove('active');
    currentSectionIndex--;
    if (currentSectionIndex >= 0) {
        document.getElementById(sections[currentSectionIndex]).classList.add('active');
        updateProgress();
    }
}

function saveCurrentSection() {
    const currentSection = sections[currentSectionIndex];
    
    if (currentSection === 'psychNorth') {
        psychResponses.north = {
            q1: document.getElementById('north1').value,
            q2: document.getElementById('north2').value,
            q3: document.getElementById('north3').value
        };
    } else if (currentSection === 'psychEast') {
        psychResponses.east = {
            q1: document.getElementById('east1').value,
            q2: document.getElementById('east2').value,
            q3: document.getElementById('east3').value
        };
    } else if (currentSection === 'psychSouth') {
        psychResponses.south = {
            q1: document.getElementById('south1').value,
            q2: document.getElementById('south2').value,
            q3: document.getElementById('south3').value
        };
    } else if (currentSection === 'psychWest') {
        psychResponses.west = {
            q1: document.getElementById('west1').value,
            q2: document.getElementById('west2').value,
            q3: document.getElementById('west3').value
        };
    }
    
    if (currentSection === 'skillsDetailed') {
        selectedClusters.forEach(clusterId => {
            const cluster = CAREER_CLUSTERS[clusterId];
            Object.keys(cluster.skills).forEach(skillId => {
                const element = document.getElementById('skill-' + skillId);
                if (element) skillLevels[skillId] = parseInt(element.value);
            });
        });
    }
}

function analyzeText(text) {
    if (!text || text.trim().length === 0) return {score: 0, wordCount: 0};
    const words = text.split(/\s+/).filter(w => w.length > 0);
    const workplaceWords = /\b(team|collaborate|safety|improve|learn|challenge|adapt|solve|communicate|responsibility)\b/gi;
    const wordScore = Math.min(words.length / 50, 1) * 30;
    const diversityScore = (new Set(words.map(w => w.toLowerCase())).size / words.length) * 20;
    const workplaceScore = Math.min((text.match(workplaceWords) || []).length, 5) * 10;
    return {score: Math.round(wordScore + diversityScore + workplaceScore), wordCount: words.length};
}

function calculateQuadrantScore(quadrant) {
    const responses = psychResponses[quadrant];
    let totalScore = 0, responseCount = 0;
    for (let key in responses) {
        const analysis = analyzeText(responses[key]);
        totalScore += analysis.score;
        if (analysis.wordCount > 0) responseCount++;
    }
    return responseCount > 0 ? Math.min(Math.round(totalScore / responseCount), 100) : 0;
}

function getArchetype(quadrant, score) {
    const archetypes = {
        north: {
            high: "Team Leader - Natural collaborator who builds strong workplace relationships",
            medium: "Team Player - Actively contributes to group dynamics",
            low: "Independent Contributor - Works best autonomously"
        },
        east: {
            high: "Safety Champion - Proactively identifies and mitigates workplace hazards",
            medium: "Risk-Aware - Follows protocols and assesses situations carefully",
            low: "Direct Executor - Focuses on task completion with standard precautions"
        },
        south: {
            high: "Innovation Driver - Constantly improves processes and solves complex problems",
            medium: "Problem Solver - Balances creativity with practical constraints",
            low: "Process Follower - Executes established procedures reliably"
        },
        west: {
            high: "Adaptive Expert - Thrives under pressure and masters new skills quickly",
            medium: "Steady Learner - Handles challenges while building competency",
            low: "Comfort Zone Professional - Prefers familiar tasks and stable environments"
        }
    };
    const level = score >= 70 ? 'high' : (score >= 40 ? 'medium' : 'low');
    return archetypes[quadrant][level];
}

function generateResults() {
    sections.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.classList.remove('active');
    });
    
    const psychScores = {
        north: calculateQuadrantScore('north'),
        east: calculateQuadrantScore('east'),
        south: calculateQuadrantScore('south'),
        west: calculateQuadrantScore('west')
    };
    
    userState.psychologicalScores = psychScores;
    
    for (let quadrant in psychScores) {
        const score = psychScores[quadrant];
        document.getElementById(quadrant + 'Score').textContent = score;
        document.getElementById(quadrant + 'Score').className = 'score-value ' + (score >= 70 ? 'high' : score >= 40 ? 'medium' : 'low');
        setTimeout(() => {
            const barEl = document.getElementById(quadrant + 'Bar');
            barEl.style.width = score + '%';
            barEl.className = 'score-bar-fill ' + (score >= 70 ? 'high' : score >= 40 ? 'medium' : 'low');
        }, 100);
        document.getElementById(quadrant + 'Archetype').textContent = getArchetype(quadrant, score);
    }
    
    for (let skillId in skillLevels) {
        const level = skillLevels[skillId];
        if (level > 0) userState.skillLevels[skillId] = level;
    }
    
    generateSkillsSummary();
    generateDegreePathways();
    
    document.getElementById('resultsSection').classList.add('active');
    
    const finalDisplay = document.getElementById('finalGamificationDisplay');
    finalDisplay.innerHTML = `
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center;">
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${userState.careerReadinessLevel}</div>
                <div>Career Readiness Level</div>
            </div>
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${Object.keys(userState.skillLevels).length}</div>
                <div>Skills Assessed</div>
            </div>
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${selectedClusters.length}</div>
                <div>Career Clusters</div>
            </div>
        </div>
    `;
    
    updateProgress();
}

function generateSkillsSummary() {
    const skillsSummary = document.getElementById('skillsSummary');
    
    const allSkillNames = {};
    Object.values(CAREER_CLUSTERS).forEach(cluster => {
        Object.assign(allSkillNames, cluster.skills);
    });
    
    const skillEntries = Object.entries(userState.skillLevels).map(([id, level]) => {
        const levelName = ['None', 'Beginner', 'Intermediate', 'Advanced'][level];
        const color = level === 3 ? '#28a745' : level === 2 ? '#ffc107' : '#dc3545';
        return `<div style="padding: 5px 0;"><strong>${allSkillNames[id] || id}:</strong> <span style="color: ${color}; font-weight: 600;">${levelName}</span></div>`;
    }).join('');
    
    skillsSummary.innerHTML = skillEntries || '<p>No technical skills assessed yet.</p>';
}

function generateDegreePathways() {
    const pathwaysContent = document.getElementById('degreePathways');
    
    const topSkills = Object.entries(userState.skillLevels)
        .filter(([id, level]) => level > 0)
        .sort(([,a], [,b]) => b - a)
        .slice(0, 5);
    
    if (topSkills.length === 0) {
        pathwaysContent.innerHTML = '<p style="color: #666;">Complete skills assessment to see education pathways.</p>';
        return;
    }
    
    const allSkillNames = {};
    Object.values(CAREER_CLUSTERS).forEach(cluster => {
        Object.assign(allSkillNames, cluster.skills);
    });
    
    let html = '<div style="display: grid; gap: 20px;">';
    
    topSkills.forEach(([skillId, level]) => {
        const skillName = allSkillNames[skillId] || skillId;
        const levelName = ['None', 'Beginner', 'Intermediate', 'Advanced'][level];
        
        html += `
            <div class="pathway-card">
                <div class="pathway-header">
                    <h4 style="color: #667eea; margin: 0;">${skillName}</h4>
                    <span style="font-weight: 600; color: #666;">Current: ${levelName}</span>
                </div>
                
                <div style="background: #d4edda; padding: 12px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #28a745;">
                    <strong style="color: #155724;">Next Steps:</strong>
                    <p style="margin: 5px 0 0 0; color: #155724;">
                        ${level === 0 ? 'Research entry-level certificate programs or apprenticeships in this field' : 
                          level === 1 ? 'Consider associate degree or professional certification to advance' :
                          level === 2 ? 'Pursue professional licensure or specialized certifications' :
                          'Consider teaching credentials or advanced specializations'}
                    </p>
                </div>
                
                <div class="pathway-steps">
                    <div class="pathway-step">
                        <strong>Certificate (6-12 months)</strong> - Entry-level skills, industry-recognized
                    </div>
                    <div class="pathway-step">
                        <strong>Associate Degree (2 years)</strong> - Technical depth, transfer pathway
                    </div>
                    <div class="pathway-step">
                        <strong>Bachelor's Degree (4 years)</strong> - Advanced practice, leadership roles
                    </div>
                    <div class="pathway-step">
                        <strong>Master's/Doctorate</strong> - Specialization, research, teaching
                    </div>
                </div>
            </div>
        `;
    });
    
    html += '</div>';
    pathwaysContent.innerHTML = html;
} 'low');
        }, 100);
        document.getElementById(quadrant + 'Archetype').textContent = getArchetype(quadrant, score);
    }
    
    for (let skillId in skillLevels) {
        const level = skillLevels[skillId];
        if (level > 0) userState.skillLevels[skillId] = level;
    }
    
    generateSkillsSummary();
    generateDegreePathways();
    generateMajorRecommendations();
    
    document.getElementById('resultsSection').classList.add('active');
    
    const finalDisplay = document.getElementById('finalGamificationDisplay');
    finalDisplay.innerHTML = `
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center;">
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${userState.careerReadinessLevel}</div>
                <div>Career Readiness Level</div>
            </div>
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${Object.keys(userState.skillLevels).length}</div>
                <div>Skills Assessed</div>
            </div>
            <div>
                <div style="font-size: 3rem; font-weight: bold;">${selectedClusters.length}</div>
                <div>Career Clusters</div>
            </div>
        </div>
    `;
    
    updateProgress();
}
    }
    
    const allSkillNames = {};
    Object.values(CAREER_CLUSTERS).forEach(cluster => {
        Object.assign(allSkillNames, cluster.skills);
    });
    
    let html = '<div style="display: grid; gap: 20px;">';
    
    topSkills.forEach(([skillId, level]) => {
        const skillName = allSkillNames[skillId] || skillId;
        const levelName = ['None', 'Beginner', 'Intermediate', 'Advanced'][level];
        
        html += `
            <div class="pathway-card">
                <div class="pathway-header">
                    <h4 style="color: #667eea; margin: 0;">${skillName}</h4>
                    <span style="font-weight: 600; color: #666;">Current: ${levelName}</span>
                </div>
                
                <div style="background: #d4edda; padding: 12px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #28a745;">
                    <strong style="color: #155724;">Next Steps:</strong>
                    <p style="margin: 5px 0 0 0; color: #155724;">
                        ${level === 0 ? 'Research entry-level certificate programs or apprenticeships in this field' : 
                          level === 1 ? 'Consider associate degree or professional certification to advance' :
                          level === 2 ? 'Pursue professional licensure or specialized certifications' :
                          'Consider teaching credentials or advanced specializations'}
                    </p>
                </div>
                
                <div class="pathway-steps">
                    <div class="pathway-step">
                        <strong>Certificate (6-12 months)</strong> - Entry-level skills, industry-recognized
                    </div>
                    <div class="pathway-step">
                        <strong>Associate Degree (2 years)</strong> - Technical depth, transfer pathway
                    </div>
                    <div class="pathway-step">
                        <strong>Bachelor's Degree (4 years)</strong> - Advanced practice, leadership roles
                    </div>
                    <div class="pathway-step">
                        <strong>Master's/Doctorate</strong> - Specialization, research, teaching
                    </div>
                </div>
            </div>
        `;
    });
    
    html += '</div>';
    pathwaysContent.innerHTML = html;
}

function openMajorSelector() {
    window.open('major-selector.html', '_blank');
}

updateProgress();